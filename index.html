<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Museum ArQuest - –ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π –æ—Ä–Ω–∞–º–µ–Ω—Ç</title>
    
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="loader" class="loader-screen">
        <div class="loader-content">
            <div class="museum-logo">
                <img class="logo" src="./assets/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø –º—É–∑–µ—è">
            </div>
            <h1>–ò—Å—Ç–æ—Ä–∏—è –≤ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–µ</h1>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ AR-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞...</p>
        </div>
    </div>

    <!-- –ü—Ä–æ–ª–æ–≥ -->
    <div id="prologue" class="prologue-screen hidden">
        <div class="princess-hologram">
            <div class="hologram-ring"></div>
            <div class="hologram-avatar">üë∏</div>
        </div>
        
        <div class="dialogue-box">
            <h2>–ú—É–∑–µ–π–∫–∞</h2>
            <p id="prologue-text">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –î–æ–±—Ä—É—à—Å–∫–∏–π —Ä–∞–π–æ–Ω–Ω—ã–π –∫—Ä–∞–µ–≤–µ–¥—á–µ—Å–∫–∏–π –º—É–∑–µ–π. –¢—ã –≥–æ—Ç–æ–≤ –ø—Ä–æ–π—Ç–∏ –∫–≤–µ—Å—Ç? –ï—Å–ª–∏ –¥–∞, —Ç–æ –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –∏ –¥–∞–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ.</p>
            <button class="btn-primary" onclick="startFirstQuest()">–ù–∞—á–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ</button>
        </div>
    </div>

    <!-- AR —Å—Ü–µ–Ω–∞ –¥–ª—è –ø–µ—Ä–≤–æ–π –º–µ—Ç–∫–∏ (—à–∫–æ–ª–∞) -->
    <div id="ar-scene-school" class="ar-container hidden">
        <a-scene mindar-image="imageTargetSrc: ./assets/targets.mind; autoStart: false; uiScanning: 'yes';" 
                 color-space="sRGB" 
                 renderer="colorManagement: true, physicallyCorrectLights" 
                 vr-mode-ui="enabled: false" 
                 device-orientation-permission-ui="enabled: false">
            <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
            <a-entity id="school-target" mindar-image-target="targetIndex: 0"></a-entity>
        </a-scene>
        <div class="scan-hint">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å–Ω–∏—Ü—É —à–∫–æ–ª—ã –¥–ª—è –¥–µ—Ç–µ–π —Ä–∞–±–æ—á–∏—Ö —Ñ–∞–±—Ä–∏–∫–∏</div>
    </div>

    <!-- AR —Å—Ü–µ–Ω–∞ –¥–ª—è –≤—Ç–æ—Ä–æ–π –º–µ—Ç–∫–∏ (–≤–∞–∑–∞) -->
    <div id="ar-scene-vase" class="ar-container hidden">
        <a-scene mindar-image="imageTargetSrc: ./assets/targets.mind; autoStart: false; uiScanning: 'yes';" 
                 color-space="sRGB" 
                 renderer="colorManagement: true, physicallyCorrectLights" 
                 vr-mode-ui="enabled: false" 
                 device-orientation-permission-ui="enabled: false">
            <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
            <a-entity id="vase-target" mindar-image-target="targetIndex: 1"></a-entity>
        </a-scene>
        <div class="scan-hint">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ —á–µ—Ä–µ–ø–∫–∏ –≤–∞–∑—ã</div>
    </div>
    
    <!-- AR —Å—Ü–µ–Ω–∞ –¥–ª—è —Ç—Ä–µ—Ç—å–µ–π –º–µ—Ç–∫–∏ (–æ—Ä–Ω–∞–º–µ–Ω—Ç) -->
    <div id="ar-scene-ornament" class="ar-container hidden">
        <a-scene mindar-image="imageTargetSrc: ./assets/targets.mind; autoStart: false;  uiScanning: 'yes';" 
                 color-space="sRGB" 
                 renderer="colorManagement: true, physicallyCorrectLights" 
                 vr-mode-ui="enabled: false" 
                 device-orientation-permission-ui="enabled: false">
            <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
            <a-entity id="ornament-target" mindar-image-target="targetIndex: 2"></a-entity>
        </a-scene>
        <div class="scan-hint">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ –±–µ–ª–æ—Ä—É—Å—Å–∫–∏–π –æ—Ä–Ω–∞–º–µ–Ω—Ç</div>
    </div>

    <!-- AR –∫–æ–Ω—Ç–µ–Ω—Ç —à–∫–æ–ª—ã -->
    <div id="ar-content-school" class="hidden">
        <div class="ar-content-wrapper">
            <button class="close-btn" onclick="closeSchoolContent()">‚úï</button>
            
            <div class="ar-content-header">
                <h2>üéØ –ú–µ—Ç–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞!</h2>
                <p class="subtitle">–î–æ–±—Ä—É—à—Å–∫–∞—è —à–∫–æ–ª–∞, 1909 –≥–æ–¥</p>
            </div>
            
            <div class="ar-content-body">
                <div class="content-image">
                    <img src="assets/museum.jpg" alt="–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ç–æ">
                    <div class="image-caption">–ó–¥–∞–Ω–∏–µ —à–∫–æ–ª—ã –≤ –Ω–∞—à–∏ –¥–Ω–∏</div>
                </div>
                
                <div class="content-text">
                    <h3>–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞</h3>
                    <p>–®–∫–æ–ª–∞ –±—ã–ª–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –≤ 1909 –≥–æ–¥—É –ø–æ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–µ –∫–Ω—è–≥–∏–Ω–∏ –ò—Ä–∏–Ω—ã –ü–∞—Å–∫–µ–≤–∏—á. 
                    –ó–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ —Å—Ç–∏–ª–µ –º–æ–¥–µ—Ä–Ω —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –Ω–µ–æ–≥–æ—Ç–∏–∫–∏...</p>
                    
                    <div class="facts">
                        <div class="fact-item">
                            <span class="fact-icon">üèõÔ∏è</span>
                            <span>–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä: –ò–≤–∞–Ω –°–µ–º—ë–Ω–æ–≤</span>
                        </div>
                        <div class="fact-item">
                            <span class="fact-icon">üë•</span>
                            <span>–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: 200 —É—á–µ–Ω–∏–∫–æ–≤</span>
                        </div>
                        <div class="fact-item">
                            <span class="fact-icon">üìö</span>
                            <span>–ü–µ—Ä–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã: —á—Ç–µ–Ω–∏–µ, –ø–∏—Å—å–º–æ, –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞</span>
                        </div>
                    </div>
                    
                    <button class="btn-primary next-quest-btn" onclick="startVaseQuest()">
                        üè∫ –ù–∞–π—Ç–∏ –¥—Ä–µ–≤–Ω—é—é –≤–∞–∑—É
                    </button>
                    <button class="btn-primary next-quest-btn" onclick="startOrnamentQuest()" style="margin-top: 10px; background: linear-gradient(135deg, #8b0000 0%, #cc3333 100%);">
                        üé® –ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π –æ—Ä–Ω–∞–º–µ–Ω—Ç
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã —Å –≤–∞–∑–æ–π -->
    <div id="game-screen" class="game-screen hidden">
        <div class="game-header">
            <h1>–†–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏—è –¥—Ä–µ–≤–Ω–µ—Å–ª–∞–≤—è–Ω—Å–∫–æ–π –≤–∞–∑—ã</h1>
            <p class="game-subtitle">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∫–µ—Ä–∞–º–∏–∫–∏ –Ω–∞ –∫–æ–Ω—Ç—É—Ä –≤–∞–∑—ã, —á—Ç–æ–±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç</p>
        </div>

        <div class="game-container">
            <div class="game-panel fragments-panel">
                <h2 class="panel-title">üè∫ –ê—Ä—Ö–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã</h2>
                <div class="fragments-area" id="fragmentsArea"></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p style="text-align: center; margin-top: 10px; color: #d4b59e;">
                    –°–æ–±—Ä–∞–Ω–æ: <span id="piecesCount">0</span> / <span id="totalPieces">12</span>
                </p>
            </div>

            <div class="game-panel vase-panel">
                <h2 class="panel-title">üéØ –ó–æ–Ω–∞ —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏–∏</h2>
                <div class="vase-area" id="vaseArea">
                    <img id="vaseImage" src="./assets/vaza.jpg" alt="Vase outline">
                </div>

                <div class="vase-info">
                    <div class="vase-name">–°–ª–∞–≤—è–Ω—Å–∫–∞—è –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–∞—è —É—Ä–Ω–∞ X –≤–µ–∫–∞</div>
                    <div class="vase-desc">–ì–ª–∏–Ω—è–Ω–∞—è —É—Ä–Ω–∞ —Å –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–º –æ—Ä–Ω–∞–º–µ–Ω—Ç–æ–º, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –≤ –∫—É—Ä–≥–∞–Ω–µ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –°–º–æ–ª–µ–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏. –î–∞—Ç–∏—Ä—É–µ—Ç—Å—è X –≤–µ–∫–æ–º –Ω.—ç.</div>
                </div>
            </div>
        </div>

        <div class="game-controls">
            <button class="game-btn" onclick="restartGame()">üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
            <button class="game-btn" onclick="backToMuseum()">üèõÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º—É–∑–µ–π</button>
        </div>

        <div class="stats-bar">
            <div class="stat">
                <span class="stat-value" id="placedCount">0</span>
                <span class="stat-label">–°–æ–±—Ä–∞–Ω–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="timer">00:00</span>
                <span class="stat-label">–í—Ä–µ–º—è</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="accuracy">0%</span>
                <span class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å</span>
            </div>
        </div>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ (–≤–∞–∑–∞) -->
    <div class="win-message" id="winMessage">
        <h2>üèÜ –í–∞–∑–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!</h2>
        <p>–í—ã —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–ª–∏ –¥—Ä–µ–≤–Ω–µ—Å–ª–∞–≤—è–Ω—Å–∫—É—é –≤–∞–∑—É. –ê—Ä—Ö–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏!</p>
        <p>–í—Ä–µ–º—è: <span id="finalTime">00:00</span></p>
        <button class="game-btn" onclick="restartGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        <button class="game-btn" onclick="backToMuseum()">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º—É–∑–µ–π</button>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã —Å –æ—Ä–Ω–∞–º–µ–Ω—Ç–æ–º -->
    <div id="ornament-game-screen" class="ornament-game-screen hidden">
        <div class="ornament-game-header">
            <h1>–ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π –æ—Ä–Ω–∞–º–µ–Ω—Ç</h1>
            <p class="ornament-game-subtitle">–ó–∞–∫—Ä–∞—Å—å—Ç–µ –∫–≤–∞–¥—Ä–∞—Ç—ã, —á—Ç–æ–±—ã –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –±–µ–ª–æ—Ä—É—Å—Å–∫–∏–π –æ—Ä–Ω–∞–º–µ–Ω—Ç!</p>
        </div>
        
        <div class="ornament-game-container">
            <div class="ornament-pattern-section">
                <h2 class="ornament-section-title">–û–±—Ä–∞–∑–µ—Ü –æ—Ä–Ω–∞–º–µ–Ω—Ç–∞</h2>
                <div class="ornament-pattern-image-container">
                    <img id="ornamentPatternImage" class="ornament-pattern-image" src="./assets/orname.jpg" alt="–ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π –æ—Ä–Ω–∞–º–µ–Ω—Ç">
                </div>
                <p class="ornament-pattern-caption">–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –±–µ–ª–æ—Ä—É—Å—Å–∫–∏–π —É–∑–æ—Ä</p>
            </div>
            
            <div class="ornament-draw-section">
                <h2 class="ornament-section-title">–ó–∞–∫—Ä–∞—Å—å—Ç–µ –æ—Ä–Ω–∞–º–µ–Ω—Ç</h2>
                <div class="ornament-canvas-wrapper">
                    <canvas id="ornamentGameCanvas"></canvas>
                </div>
                
                <div class="ornament-tool-info">
                    <div class="ornament-tool-color"></div>
                    <span>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–≤–∞–¥—Ä–∞—Ç, —á—Ç–æ–±—ã –∑–∞–∫—Ä–∞—Å–∏—Ç—å/—Å—Ç–µ—Ä–µ—Ç—å</span>
                </div>
                
                <div class="ornament-mobile-tip">
                    üí° –ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –∫–≤–∞–¥—Ä–∞—Ç—ã, —á—Ç–æ–±—ã –∑–∞–∫—Ä–∞—à–∏–≤–∞—Ç—å –∏–ª–∏ —Å—Ç–∏—Ä–∞—Ç—å –∏—Ö
                </div>
                
                <div class="ornament-hint-info">
                    –ó–∞–∫—Ä–∞—Å—å—Ç–µ –∫—Ä–∞—Å–Ω—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã, —á—Ç–æ–±—ã –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —É–∑–æ—Ä —Å–ª–µ–≤–∞
                </div>
                
                <div class="ornament-controls">
                    <button id="ornamentClearBtn" class="ornament-btn ornament-btn-clear">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
                    <button id="ornamentCheckBtn" class="ornament-btn ornament-btn-check">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                    <button id="ornamentHintBtn" class="ornament-btn ornament-btn-hint">–ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
                    <button id="ornamentBackBtn" class="ornament-btn ornament-btn-back">üèõÔ∏è –í –º—É–∑–µ–π</button>
                </div>
                
                <div class="ornament-status-bar">
                    <div class="ornament-status-item">
                        <span class="ornament-status-label">–ó–∞–∫—Ä–∞—à–µ–Ω–æ</span>
                        <span id="ornamentFilledCount" class="ornament-status-value">0</span>
                    </div>
                    <div class="ornament-status-item">
                        <span class="ornament-status-label">–ù—É–∂–Ω–æ</span>
                        <span id="ornamentTotalCount" class="ornament-status-value">64</span>
                    </div>
                    <div class="ornament-status-item">
                        <span class="ornament-status-label">–°—Ç–∞—Ç—É—Å</span>
                        <span id="ornamentStatusDisplay" class="ornament-status-value">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ (–æ—Ä–Ω–∞–º–µ–Ω—Ç) -->
    <div id="ornamentResultMessage" class="ornament-result-message">
        <div class="ornament-result-content">
            <div class="ornament-result-title">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</div>
            <div class="ornament-result-details" id="ornamentResultDetails">–í—ã —É—Å–ø–µ—à–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏–ª–∏ –æ—Ä–Ω–∞–º–µ–Ω—Ç!</div>
            <div class="ornament-result-buttons">
                <button id="ornamentRestartBtn" class="ornament-btn ornament-btn-success">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                <button id="ornamentBackFromWinBtn" class="ornament-btn ornament-btn-back">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º—É–∑–µ–π</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>